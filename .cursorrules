# 🍌 바나나웨딩 (Banana Wedding) 개발 규칙

> **CRITICAL: SYNC MANDATE**
> 에이전트 가이드/정의 문서는 아래 파일을 동일 기준으로 함께 업데이트합니다:
> `.agent/rules/banana-wedding.md`, `.cursorrules`, `AGENTS.md`, `README.md`, `ARCHITECTURE.md`, `.opencode/AGENTS.md`.
> 스킬 경로나 정의 변경 시 `.agents/skills/*/SKILL.md`, `.codex/skills/*`, `.cursor/skills/*`, `.opencode/oh-my-opencode.json`도 함께 동기화합니다.

## 1. 핵심 철학: "성능, 미학, 그리고 발견 가능성"
- **타협 없음 (Zero Compromise)**: 고성능(LCP 2.5s 미만, CLS 0.1 미만)과 프리미엄 디자인("WOW" 팩터)을 동시에 만족해야 함.
- **모바일 퍼스트 (Mobile First)**: 모든 모든 디자인과 기능은 모바일 환경(최소 44px 터치 영역)을 최우선으로 고려함.
- **재사용 우선 (Reuse First)**: 새로운 컴포넌트를 만들기 전에 반드시 기존 UI 컴포넌트 라이브러리에서 재사용 가능성을 검토함.
- **사용자 경험 우선 (User Experience First)**: 로딩, 에러, 빈 상태 등의 트랜지션 상태를 가장 먼저 설계함.
- **SEO 필수 (SEO Mandatory)**: 모든 공개 페이지에는 적절한 메타데이터, OpenGraph 태그, 구조화 데이터(JSON-LD) 및 시맨틱 HTML이 필수적으로 포함되어야 함.

## 2. 기술 표준 (Technical Standards)
- **프레임워크**: Next.js 16+ (App Router) 및 React 19의 최신 기능을 활용하며, Server Components를 기본으로 함.
- **데이터 흐름**: 
  - 데이터 페칭은 Top-Level Container에서 관리, 자식은 Props로 전달 (Container/Presentational 패턴).
  - 서버 컴포넌트에서 Service 계층 직접 호출 (내부 API Route 호출 금지).
  - 데이터 변이는 Server Actions 사용.
- **상태 관리**: Zustand 단일 스토어(`useInvitationStore`) 사용. 셀렉터로 필요한 상태만 구독.
- **스타일링**: **SCSS Modules 필수 사용**. Radix UI의 스타일링은 SCSS Modules를 통해 직접 제어함.
  - Tailwind CSS 사용 금지.
- **공통 컴포넌트**: 
  - Radix UI Primitives 기반으로 점진적 전환.

## 3. 디자인 시스템 및 스타일 규칙 (Strict)
- **전용 스타일링 값 검색 필수 (Strict Style Rule)**: 모든 색상값, 패딩, 폰트 사이즈, 마진 등 모든 스타일 값은 하드코딩하지 말고 반드시 `src/styles` 내의 변수나 토큰을 검색하여 사용하십시오. 관련 변수가 없다면 새로 정의하거나 사용자에게 확인하십시오.
- **Primary 컬러**: 바나나 옐로우 `#FBC02D` (`v.$primary`).
- **하드코딩된 색상 값 절대 금지**: 모든 색상은 `src/styles/_variables.scss`에 정의된 변수를 사용함.
  ```scss
  @use "@/styles/variables" as v;
  color: v.$primary;
  background: v.$white;
  ```
- **애니메이션**: iOS 느낌의 부드러운 트랜지션 (`cubic-bezier(0.16, 1, 0.3, 1)`) 적용.
- **아이콘**: `lucide-react` 사용. 활성 상태는 노란색 텍스트(배경 없음)로 통일.

## 4. UI 컴포넌트 아키텍처 (Hybrid Component Pattern)
- `src/components/ui`는 primitive 전용으로 유지하고, 복합/도메인 컴포넌트는 `src/components/common`에 둡니다.
- **폴더 구조 준수**:
  ```
  src/components/ui/ComponentName/
  ├── ComponentName.tsx        # 컴포넌트 로직 (PascalCase)
  ├── ComponentName.module.scss # 스타일
  └── index.ts                 # Re-export (export * from './ComponentName')
  ```
- **필수 사항**: Named Export 사용, `displayName` 설정, SCSS 변수 활용.

## 5. 운영 및 협업 규칙
- **커밋 메시지 (AI Generation Strict Rule)**: 반드시 **한글**로만 생성합니다. (Generate the commit message entirely in Korean. NEVER use English for the commit description.)
  - 예: `feat: 새로운 기능 추가`, `fix: 버그 수정`, `refactor: 모프 애니메이션 컴포넌트 스택 추가`
- **타입스크립트**: Strict Mode 준수, `any` 사용 엄격히 금지.
- **빌드 및 린트**: 코드 작성 후 반드시 빌드 에러 및 린트 오류 확인 (Pre-Push 체크).
- **에러 처리**: 도구 실행 실패 시 즉시 자가 수정(Self-Correction).
- **보안**: `.env.local` 및 비밀키는 커밋/공유 금지. 노출 시 즉시 폐기/재발급.

## 6. SEO / 검색 인덱싱 규칙 (2026-02)
- **Public metadata required**: 공개 페이지에는 `title`, `description`, `canonical`, `openGraph`, `twitter`, `robots`를 정의한다.
- **Verification env required**: 사이트 인증 토큰은 `GOOGLE_SITE_VERIFICATION`, `NAVER_SITE_VERIFICATION` 환경 변수로 관리한다.
- **Search endpoints fixed**: 아래 경로를 항상 유지한다.
  - `/robots.txt` (`src/app/robots.ts`)
  - `/sitemap.xml` (`src/app/sitemap.ts`)
  - `/rss.xml` (`src/app/rss.xml/route.ts`)
- **Noindex for private flows**: 로그인/빌더/마이페이지/프리뷰 등 비공개 흐름에는 `noindex`를 적용한다.
- **Structured data required**:
  - 전역: `WebSite`, `SoftwareApplication`, `Organization`
  - 홈: `WebPage`, `FAQPage`
  - 문서형 페이지: `BreadcrumbList` (`/brand-story`, `/privacy`, `/terms`)
- **Post-deploy sequence**:
  1. Vercel 환경 변수(Production/Preview) 확인
  2. 재배포
  3. 메타 태그/robots/sitemap/rss 실서버 확인
  4. Google Search Console/Naver Search Advisor 사이트맵 제출 및 수집 요청

## 7. 특수 가이드 (Specialized Guides)
- **Vercel Best Practices (기준/수정 금지)**: `.agent/skills/vercel-react-best-practices/SKILL.md`를 우선 참조.
- **Vercel Best Practices (미러)**: `.codex/skills/vercel-react-best-practices/SKILL.md`, `.cursor/skills/vercel-react-best-practices/SKILL.md`.
- **Design MD Skill**: `.agents/skills/design-md/SKILL.md`를 참조.
- **SEO Launch Ops Skill**: `.agents/skills/seo-launch-ops/SKILL.md`를 우선 참조.
- **OpenCode Agent Profile**: `.opencode/AGENTS.md`, `.opencode/oh-my-opencode.json`을 참조.
- **모달/드로어 접근성**: `aria-hidden` 충돌 방지를 위해 `onOpenAutoFocus` 필수 적용 (공통 컴포넌트에서 이미 처리됨).
- **한국어 입력**: 모바일 환경에서의 한국어 입력 문제를 고려하여 `useKoreanNameInput` 등 최적화된 훅 사용.

---
*이 문서는 바나나웨딩 프로젝트의 최고 수준의 코드 품질과 일관된 사용자 경험을 보장하기 위한 약속입니다.*
