@use '../../../styles/variables' as v;
@use '../../../styles/mixins' as m;

.cardWrapper {
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
  container-type: inline-size;
  container-name: invitation-card;
}

.cardItem {
  position: relative;
  border-radius: 1rem; // v.$radius-md
  overflow: hidden;
  background-color: v.$white;
  aspect-ratio: 3 / 4.5;
  box-shadow:
    0 20px 40px rgba(v.$black, 0.08),
    0 1px 3px rgba(v.$black, 0.02); // v.$shadow-card
  transition: all 400ms cubic-bezier(0.16, 1, 0.3, 1); // v.$transition-400 v.$ease-ios
  border: 1px solid v.$grey-100; // v.$zinc-100

  @include m.hover {
    box-shadow: 0 30px 60px rgba(v.$black, 0.12); // v.$shadow-hover-card
    border-color: v.$grey-200; // v.$zinc-200
  }
}

.imageWrapper,
.fallbackWrapper {
  position: relative;
  width: 100%;
  height: 100%;
  overflow: hidden;

  img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 800ms cubic-bezier(0.16, 1, 0.3, 1); // v.$transition-800 v.$ease-ios
  }

  @include m.hover {
    img {
      transform: scale(1.08); // v.$scale-hover-sm
    }
  }
}

.fallbackWrapper {
  display: flex;
  align-items: center;
  justify-content: center;
  background-color: v.$primary-50; // v.$primary-50

  .bananaIcon {
    width: 4rem;
    height: 4rem;
    color: v.$primary-500; // v.$color-primary
    opacity: 0.3;
    transform: rotate(-15deg);
    filter: drop-shadow(0 4px 12px rgba(v.$primary-500, 0.2)); // v.$color-primary
  }
}

.overlay {
  position: absolute;
  inset: 0;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  padding: 0.75rem;
  background: linear-gradient(
    to bottom,
    rgba(v.$black, 0.45) 0%,
    transparent 30%,
    transparent 60%,
    rgba(v.$black, 0.65) 100%
  );
  z-index: 5;

  &.noImage {
    background: linear-gradient(
      to bottom,
      rgba(v.$primary-100, 0.4) 0%,
      transparent 40%,
      transparent 70%,
      rgba(v.$primary-100, 0.2) 100%
    );

    .overlayTitle {
      color: v.$grey-900; // v.$zinc-900
      text-shadow: none;
    }

    .moreButton {
      color: v.$grey-500 !important; // v.$zinc-500
      background-color: rgba(v.$black, 0.05) !important;
      border-color: rgba(v.$black, 0.05) !important;

      &:hover {
        background-color: rgba(v.$black, 0.1) !important;
        color: v.$grey-800 !important; // v.$zinc-800
      }
    }
  }
}

.overlayTop {
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
}

.statusRow {
  display: flex;
  justify-content: space-between;
  align-items: center;
  width: 100%;
}

.moreButton {
  color: v.$white !important;
  background-color: rgba(v.$white, 0.2) !important;
  backdrop-filter: blur(4px);
  width: 32px !important;
  height: 32px !important;
  border-radius: 50% !important;
  border: 1px solid rgba(v.$white, 0.3) !important;

  &[data-state='open'] {
    background-color: rgba(v.$white, 0.4) !important;
    border-color: rgba(v.$white, 0.5) !important;
  }
}

.overlayTitle {
  font-size: 1.25rem; // v.$font-size-xl
  font-weight: 800;
  color: v.$white;
  text-shadow: 0 2px 10px rgba(v.$black, 0.5);
  letter-spacing: -0.03em;
  line-height: 1.25;
  word-break: break-all;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;

  @container invitation-card (max-width: 180px) {
    font-size: 0.9375rem; // v.$font-size-md
  }
}

.footer {
  display: flex;
  gap: 0.5rem;
  width: 100%;
  margin-top: auto;

  @container invitation-card (max-width: 250px) {
    flex-direction: column;
    gap: 0.4rem;
  }

  .footerButton {
    flex: 1;
    font-weight: 700;
    height: 3.25rem !important; // 52px touch area
    border-radius: 1rem !important; // v.$radius-lg
    font-size: 0.9375rem; // v.$font-size-md
    transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1); // v.$ease-ios

    &.primary {
      background-color: v.$primary-500 !important; // v.$color-primary
      color: v.$grey-900 !important; // v.$zinc-900
      border: none !important;

      &:hover {
        background-color: v.$primary-600 !important; // v.$color-primary-hover
        transform: translateY(-2px);
      }
    }

    &.secondary {
      background-color: v.$white !important;
      color: v.$grey-900 !important; // v.$zinc-900
      border: 1px solid v.$grey-200 !important; // v.$zinc-200

      &:hover {
        background-color: v.$grey-50 !important; // v.$zinc-50
        border-color: v.$grey-300 !important; // v.$zinc-300
      }
    }

    &.pending {
      background-color: v.$grey-100 !important; // v.$zinc-100
      color: v.$grey-500 !important; // v.$zinc-500
      border: none !important;
    }

    &.share {
      background-color: v.$primary-500 !important; // v.$color-primary
      color: v.$grey-900 !important; // v.$zinc-900
      border: none !important;
    }
  }
}

.dropdownContent {
  width: 160px;
  padding: 0.4rem;
  border-radius: 1rem; // v.$radius-md
}

.menuIcon {
  margin-right: 0.5rem;
}

.dateMenuItem {
  margin-top: 0.4rem;
  padding-top: 0.4rem !important;
  border-top: 1px solid v.$grey-100; // v.$zinc-100
  opacity: 1 !important;
  cursor: default !important;
}

.dateLabel {
  font-size: 0.625rem; // v.$font-size-3xs
  font-weight: 500;
  color: v.$grey-400; // v.$zinc-400
}

.rejectionMessage {
  font-size: 0.9375rem; // v.$font-size-md
  color: v.$grey-700;
  line-height: 1.7;
  margin-top: 1rem;
  padding: 1rem;
  background-color: v.$color-danger-bg;
  border-radius: 1rem; // v.$radius-md
  border: 1px solid v.$color-danger-border;
}

.accentMenuItem {
  font-weight: 700 !important;
  color: v.$primary-600 !important; // v.$color-primary-dark
}

.modalHeader {
  text-align: center;
  margin-bottom: 24px;
}
